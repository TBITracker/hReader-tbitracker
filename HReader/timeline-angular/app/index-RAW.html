
<!doctype html>
<html lang="en" ng-app="Timeline"  ng-controller="RecordListCtrl">
	<head>
		<title ng-bind-template="{{query}}"></title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<link rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css" type="text/css"/> 
		<link href="http://addyosmani.github.com/jquery-ui-bootstrap/bootstrap/bootstrap.css" rel="stylesheet">
		<link rel="stylesheet" href="css/master.css" type="text/css"/> 
		<script type="text/javascript" src="lib/jquery/jquery-1.8.1.js"></script>
	    <script type="text/javascript" src="lib/jquery/jquery.sparkline2.0.js">
	    </script>
	    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
	    <script src="lib/angular/angular.js"></script>
	    <script src="js/app.js"></script>
	    <script src="js/controllers.js"></script>
	    
	    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.0.0"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.csv.js?2.0.0"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.time.js?2.0.0"></script>




	    <script>
			var Timeline = angular.module('Timeline', []);

			Timeline.directive('sparkline', function () {
			  return {
			    restrict: 'E', // the directive restricts it to an element level
			    link: function postLink(scope, iElement, attrs) {
			      scope.$watch('scalars', function (newVal, oldVal) {
			      	if (newVal != null) {
						$(iElement).sparkline('html', { 
									type: 'line',
							    lineColor: '#000000',
							    spotColor: '#000000',
							    minSpotColor: '#d60D26',
							    maxSpotColor: '#d60D26',
							    highlightSpotColor: '#048A82',
    							highlightLineColor: '#d60D26',
							    fillColor: false,
							   	lineWidth: 3,
    							spotRadius: 5,
							    width: 460,
							    height: 50,
							    drawNormalOnTop: false
								});
							}
			      });
			    }
			  };
			});
		</script>
	</head>
	<body >
		<header>
			<div id="time" class="row">
				<span id="MyTab" class="row btn-group span6">
					<a href="decade.html" class="btn" data-toggle="tab">Decade</a>
					<a href="year.html" class="btn" data-toggle="tab">Year</a>
					<a href="#/partial/month.html" class="btn"  data-toggle="tab">Month</a>
					<a href="#/week" class="btn" data-toggle="tab">Week</a>
					<a href="#" class="btn active" data-toggle="tab">Day</a>
				</span>
					<ul class="row pager span5 offset2">
						<li class="previous">
							<a class="older" href="#">&larr; Older</a>
						</li>
						<li class="current-date">Today</li>
						<li class="next">
    					<a class="newer" href="#">Newer &rarr;</a>
  					</li>
					</ul>
			</div>
		</header>
		<section class="" ng-app="timeline">
			    <script type="text/javascript">

var m = [80, 80, 80, 80],
    w = 960 - m[1] - m[3],
    h = 500 - m[0] - m[2],
    parse = d3.time.format("%b %Y").parse;

// Scales and axes. Note the inverted domain for the y-scale: bigger is up!
var x = d3.time.scale().range([0, w]),
    y = d3.scale.linear().range([h, 0]),
    xAxis = d3.svg.axis().scale(x).tickSize(-h).tickSubdivide(true),
    yAxis = d3.svg.axis().scale(y).ticks(4).orient("right");

// An area generator, for the light fill.
var area = d3.svg.area()
    .interpolate("monotone")
    .x(function(d) { return x(d.date); })
    .y0(h)
    .y1(function(d) { return y(d.price); });

// A line generator, for the dark stroke.
var line = d3.svg.line()
    .interpolate("monotone")
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.price); });

d3.csv("readme.csv", function(data) {

  // Filter to one symbol; the S&P 500.
  var values = data.filter(function(d) {
    return d.symbol == "S&P 500";
  });

  // Parse dates and numbers. We assume values are sorted by date.
  values.forEach(function(d) {
    d.date = parse(d.date);
    d.price = +d.price;
  });

  // Compute the minimum and maximum date, and the maximum price.
  x.domain([values[0].date, values[values.length - 1].date]);
  y.domain([0, d3.max(values, function(d) { return d.price; })]).nice();

  // Add an SVG element with the desired dimensions and margin.
  var svg = d3.select("body").append("svg:svg")
      .attr("width", w + m[1] + m[3])
      .attr("height", h + m[0] + m[2])
    .append("svg:g")
      .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

  // Add the clip path.
  svg.append("svg:clipPath")
      .attr("id", "clip")
    .append("svg:rect")
      .attr("width", w)
      .attr("height", h);

  // Add the area path.
  svg.append("svg:path")
      .attr("class", "area")
      .attr("clip-path", "url(#clip)")
      .attr("d", area(values));

  // Add the x-axis.
  svg.append("svg:g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + h + ")")
      .call(xAxis);

  // Add the y-axis.
  svg.append("svg:g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + w + ",0)")
      .call(yAxis);

  // Add the line path.
  svg.append("svg:path")
      .attr("class", "line")
      .attr("clip-path", "url(#clip)")
      .attr("d", line(values));

  // Add a small label for the symbol name.
  svg.append("svg:text")
      .attr("x", w - 6)
      .attr("y", h - 6)
      .attr("text-anchor", "end")
      .text(values[0].symbol);

  // On click, update the x-axis.
  svg.on("click", function() {
    var n = values.length - 1,
        i = Math.floor(Math.random() * n / 2),
        j = i + Math.floor(Math.random() * n / 2) + 1;
    x.domain([values[i].date, values[j].date]);
    var t = svg.transition().duration(750);
    t.select(".x.axis").call(xAxis);
    t.select(".area").attr("d", area(values));
    t.select(".line").attr("d", line(values));
  });
});
		</script>

			<!-- <div class="row">
				<h1 class="span3">Schedule</h1>
				<span class="span1"><a class="btn" data-toggle="dropdown"><i class="icon-plus"></i></a></span>
				<h2 class="span2">Care Plan</h2>
				<h2 class="span1">Edit</h2>
				<h2 class="span4">AM</h2>
				<h2 class="span1">PM</h2>
			</div>
			<div class="titles row">
				<h2 class="titles span4">Medications</h2>
				<p class="span2">Take 3X Daily</p>
				<span class="span1"><a class="btn" data-toggle="dropdown"><i class="icon-pencil"></i></a></span>
				<div class="progress schedule span5">
					<div class="span1">
						<img src="images/medication.png">
					</div>
					<div class="span1">
						<img src="images/medication.png">
					</div>
					<div class="span2">
						<img src="images/medication.png">
					</div>
				</div>
			</div>
			<div class="titles row">
				<h2 class="span4">Glucose Test</h2>
				<p class="span2">Take prior to Injection</p>
				<span class="span1"><a class="btn" data-toggle="dropdown"><i class="icon-pencil"></i></a></span>
				<div class="progress schedule span5">
					<div class="span1">
						<img src="images/observation.png">
					</div>
					<div class="span2">
						<img src="images/observation.png">
					</div>
					<div class="span1">
						<img src="images/observation.png">
					</div>
				</div>
			</div>
			</div>
			<div class="titles row">
				<h2 class="span4">Injections</h2>
				<p class="span2">Take after food</p>
				<span class="span1"><a class="btn" data-toggle="dropdown"><i class="icon-pencil"></i></a></span>
				<div class="progress schedule span5">
				<div class="span1">
					<img src="images/treatment.png">
				</div>
				<div class="span2">
					<img src="images/treatment.png">
				</div>
				<div class="span1">
					<img src="images/treatment.png">
				</div>
				</div>
			</div>
			</article>
		<hr class="soften">
		<article class="condition">
			<div class="titles row">
				<h1 class="titles span3">Condition</h1>
				<span class="span1"><a class="btn" data-toggle="dropdown"><i class="icon-plus"></i></a></span>
				<h2 class="span2">Results</h2>
				<h2 class="span4">Graph</h2>
			</div>
			<div class="row">
				<h2 class="span4"></h2>
				<div class="span2">
					<i class="icon-arrow-up"></i>
					<h2>7</h2> / 10
				</div>
				<div class="span6">

				</div>
			</div>
				
			</div>
			<div class="row">
				<h2 class="span4">Symptom 1</h2>
				<div class="span2">
					<i class="icon-arrow-up"></i>
					<h2>2</h2>/10
				</div>
				<div class="span6">
					<div class="slider"></div>
				</div>

			</div>
		</article>
		<hr class="soften">
		<article class="activities">
			<div class="titles row">
				<h1 class="span3">Activities</h1>
				<span class="span1"><a class="btn" data-toggle="dropdown"><i class="icon-plus"></i></a></span>
				<h2 class="span2">Results</h2>

				<h2 class="span2">Status</h2>
			</div>
			<div class="row">
				<h2 class="span4">Distance</h2>
				<div class="span2">
					<i class="icon-arrow-up"> </i><h2 class>1.2</h2> mile
				</div>
				<div class="progress span6">
						<div class="bar" style="width: 60%;">
	 				</div>
				</div>
			</div>
			<div class="row">
				<h2 class="span4">Calories</h2>
				<div class="span2"><i class="icon-arrow-up"> </i><h2>1500</h2> cal
				</div>
				<div class="progress span6">
				</div>
			</div>
		</article>
		<hr class="soften"> -->
		<article class="Vitals">
			<div class="row titles">
				<h1 class="titles span3">Vital Trends</h1>
				<span class="span1">
					<a class="btn" data-toggle="dropdown">
					<i class="icon-plus"></i>
					</a></span>
				<h2 class="span2">Result</h2>
				<h2 class="span6">Trends</h2>
		  	</div>
			<div class="row" ngChange:false ng-repeat="(description,scalars) in vitals | orderBy:orderProp">
				<div class="span4">
					<h2>{{description}}</h2>			
				</div>
				<div class="span2"> 
					<h2>{{scalars[0]}}</h2>
				</div>
				<div class="span6">		
					<p><sparkline exp="data" class="sparkline">{{scalars.join(',')}}</sparkline></p>
				</div>
			</div>
		</article>
	</section>
	</body>
</html>


